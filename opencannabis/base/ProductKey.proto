
/**
 * Specifies structures that reference specific products at their unique key or name.
 */
syntax = "proto3";

package opencannabis.base;

option optimize_for = SPEED;
option objc_class_prefix = "OCS";
option java_package = "io.opencannabis.schema.base";
option java_multiple_files = false;
option java_outer_classname = "BaseProductKey";

import "opencannabis/core/datamodel.proto";
import "opencannabis/core/ocp.proto";

import "opencannabis/content/Name.proto";
import "opencannabis/base/ProductKind.proto";


// Specifies a reference to a product.
message ProductReference {
  // Specifies the name of a product.
  opencannabis.content.Name name = 1 [
    (core.field).summary = "Specifies the name of a product.",
    (core.ocp).key_path = "name"
  ];

  // Specifies the key, if known, of a product.
  ProductKey key = 2 [
    (core.field).summary = "Specifies the key, if known, of a product.",
    (core.ocp).key_path = "key"
  ];
}


// Specifies a general key for a product, which is the combined specification of a product ID and type, which is
// enumerated in `base.ProductType`.
message ProductKey {
  option (core.record).anchor = true;

  // Product ID, an opaque string that is usually autogenerated. Within the scope of an implementing system, this may
  // also be a stringified integer such as an auto-incrementing ID, for relational-type systems. The product ID is
  // expected to be globally addressable and unique across all product categories.
  string id = 1 [
    (core.field).type = ID,
    (core.opts).required = true,
    (core.field).summary = "Product ID, an opaque string that is usually autogenerated.",
    (core.ocp).key_path = "id"
  ];

  // Type of product the ID is referring to. In most cases this entry can be omitted.
  ProductKind type = 2 [
    (core.field).explicit = true,
    (core.field).summary = "Type of product the ID is referring to. In most cases this entry can be omitted.",
    (core.ocp).key_path = "kind"
  ];

  // Product group, which represents the set of products containing this product. May be set or may not be set depending
  // on how a given provider expresses catalog content.
  string group = 3 [
    (core.field).summary = "Group ID assigned to this product and all peer products."
  ];

  // Global Trade Identification Number (GTIN) assigned to this product via GS1.
  string gtin = 4 [
    (core.field).summary = "Group ID assigned to this product and all peer products."
  ];
}
